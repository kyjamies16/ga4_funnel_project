version: 2

sources:
  - name: ga4
    database: bigquery-public-data
    schema: ga4_obfuscated_sample_ecommerce

    tables:
      - name: events
        identifier: events_20210131
        description: "GA4 event data for January 31, 2021"

        columns:
          - name: user_pseudo_id
            description: "Anonymous identifier for a user"
            tests:
              - not_null

          - name: event_name
            description: "Name of the GA4 event (e.g., page_view, purchase)"
            tests:
              - not_null
              - accepted_values:
                  values:
                    [
                      "add_payment_info",
                      "add_shipping_info",
                      "add_to_cart",
                      "begin_checkout",
                      "click",
                      "first_visit",
                      "page_view",
                      "purchase",
                      "scroll",
                      "select_item",
                      "select_promotion",
                      "session_start",
                      "user_engagement",
                      "view_item",
                      "view_promotion",
                      "view_search_results",
                    ]

          - name: event_timestamp
            description: "Timestamp when the event occurred"
            tests:
              - not_null

          - name: device_category
            description: "Device type: mobile, tablet, desktop"

          - name: country
            description: "User's country from IP geo-lookup"

          - name: traffic_source
            description: "Traffic source name (e.g., google, direct)"

          - name: event_value
            description: "Custom value passed with the event"
